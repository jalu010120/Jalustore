<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JaluStore - Sky Heart Shop</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* RESET & BASE */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Nunito', sans-serif;
      background: linear-gradient(135deg, #dfe9f3, #ffffff);
      color: #333;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      transition: background 0.3s, color 0.3s;
    }
    /* AURORA EFFECT */
    .aurora {
      position: fixed; top: -50%; left: -50%;
      width: 200%; height: 200%;
      background:
        radial-gradient(circle at 30% 30%, rgba(140,220,255,0.2), transparent 60%),
        radial-gradient(circle at 70% 70%, rgba(255,140,255,0.15), transparent 60%),
        radial-gradient(circle at 50% 50%, rgba(255,255,140,0.1), transparent 60%);
      animation: auroraAnim 20s ease-in-out infinite;
      z-index: -1;
    }
    @keyframes auroraAnim {
      0%   { transform: rotate(0deg) scale(1); }
      50%  { transform: rotate(180deg) scale(1.2); }
      100% { transform: rotate(360deg) scale(1); }
    }
    /* LOADING SCREEN */
    #loading {
      position: fixed; top: 0; left: 0;
      width: 100vw; height: 100vh;
      display: flex; align-items: center; justify-content: center;
      background: linear-gradient(135deg, #81ecec, #6c5ce7);
      z-index: 9999; transition: opacity 0.5s ease;
    }
    #loading .spinner {
      border: 4px solid #fff;
      border-top: 4px solid #00cec9;
      border-radius: 50%;
      width: 50px; height: 50px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    /* HEADER */
    header {
      background: #fefefe; padding: 1rem 2rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      position: relative; text-align: center;
    }
    header h1 { font-size: 2rem; color: #5b7fff; }
    /* DARK MODE TOGGLE */
    .toggle-switch {
      position: absolute; top:1.2rem; right:5rem;
      width: 44px; height: 24px; background: #ccc;
      border-radius: 12px; cursor: pointer;
      transition: background 0.3s;
    }
    .toggle-switch.active { background: #10ac84; }
    .toggle-switch::before {
      content: ''; position: absolute;
      top:2px; left:2px; width:20px; height:20px;
      background:#fff; border-radius:50%;
      transition: transform 0.3s;
    }
    .toggle-switch.active::before { transform: translateX(20px); }
    /* CART BUTTON */
    .cart-btn {
      position: absolute; top:1rem; right:1rem;
      background: #5b7fff; color:#fff; border:none;
      padding:0.5rem 1rem; border-radius:20px;
      cursor: pointer; font-size:1rem;
      display:flex; align-items:center; gap:0.25rem;
    }
    /* PRODUCT GRID */
    .product-grid {
      display: grid; gap:1.5rem; padding:2rem;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }
    .card {
      background: rgba(255,255,255,0.6); backdrop-filter: blur(12px);
      border-radius:16px; padding:1.5rem;
      box-shadow:0 10px 30px rgba(0,0,0,0.05);
      transition: transform 0.3s;
    }
    .card:hover { transform: translateY(-5px); }
    .card img {
      width:70px; margin-bottom:1rem;
    }
    .card h3 { font-size:1.2rem; margin-bottom:0.5rem; }
    .card p { margin:0.25rem 0; }
    .btn {
      background:#5b7fff; color:#fff; border:none;
      padding:0.5rem 1rem; margin-top:0.5rem;
      border-radius:10px; cursor: pointer;
      transition: background 0.2s;
    }
    .btn:hover { background:#4a66e8; }
    /* MODAL & CART */
    .modal, .cart-modal {
      position:fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.4);
      display:none; align-items:center; justify-content:center;
      z-index:10;
    }
    .modal-content, .cart-content {
      background:#fff; padding:2rem; border-radius:20px;
      width:90%; max-width:400px; text-align:center;
      animation: slideIn 0.3s ease;
    }
    .cart-items { text-align:left; max-height:200px; overflow-y:auto; margin-bottom:1rem; }
    .qris { width:100%; max-width:250px; margin:1rem auto; border-radius:12px; }
    .copy-code {
      background:#eee; padding:0.5rem; border-radius:8px;
      cursor:pointer; margin-bottom:1rem;
    }
    /* RESPONSIVE BUBBLE CHAT (on bottom) */
    /* omitted here for brevity; integrated earlier */
    @media (max-width:600px) {
      header h1 { font-size:1.5rem; }
      .product-grid { padding:1rem; }
    }
  </style>
</head>
<body>

  <div id="loading">
    <div class="spinner"></div>
  </div>

  <div class="aurora"></div>

  <header>
    <h1>ðŸ’– JaluStore - Sky Heart Shop</h1>
    <div id="darkToggle" class="toggle-switch" role="switch" tabindex="0" aria-checked="false"></div>
    <button class="cart-btn" onclick="openCart()">ðŸ›’ <span id="cartCount">0</span></button>
  </header>

  <section class="product-grid">
    <!-- Cards will be injected via JS -->
  </section>

  <div class="cart-modal" id="cartModal">
    <div class="cart-content">
      <h2>ðŸ›’ Keranjang</h2>
      <div class="cart-items" id="cartItems"></div>
      <img class="qris" src="https://drive.google.com/uc?export=view&id=1a1q6Wf_UgFtNJZ0MfATUsoG2WVXfZeHf" alt="QRIS">
      <div class="copy-code" onclick="copyFriendCode()">ðŸ”— Copy Friend Code</div>
      <a id="checkoutBtn" class="btn" target="_blank">Checkout via WhatsApp</a>
      <button class="btn" style="background:#ccc;color:#000;margin-top:1rem;" onclick="closeCart()">Tutup</button>
    </div>
  </div>

  <script>
    // LOADING SCREEN
    window.addEventListener('load', () => {
      setTimeout(() => {
        const l = document.getElementById('loading');
        l.style.opacity = '0';
        setTimeout(() => l.remove(), 500);
      }, 700);
    });

    // DARK MODE
    const toggle = document.getElementById('darkToggle');
    toggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      toggle.classList.toggle('active');
      localStorage.setItem('darkMode', toggle.classList.contains('active'));
    });
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark-mode');
      toggle.classList.add('active');
    }

    // PRODUCT DATA & RENDER
    const products = [
      { name:'80+20 Heart', price:'Rp 10.000', code:'SKY80' },
      { name:'200+30 Heart', price:'Rp 22.000', code:'SKY200' },
      { name:'300+40 Heart', price:'Rp 32.000', code:'SKY300' },
      { name:'400+50 Heart', price:'Rp 42.000', code:'SKY400' },
      { name:'500+70 Heart', price:'Rp 52.000', code:'SKY500' },
      { name:'600+90 Heart', price:'Rp 60.000', code:'SKY600' },
      { name:'700+120 Heart', price:'Rp 70.000', code:'SKY700' },
      { name:'800+150 Heart', price:'Rp 78.000', code:'SKY800' }
    ];
    const grid = document.querySelector('.product-grid');
    products.forEach(p => {
      const div = document.createElement('div');
      div.className = 'card';
      div.innerHTML = `
        <img src="https://cdn-icons-png.flaticon.com/512/833/833472.png" alt="Heart">
        <h3>${p.name}</h3>
        <p>Harga: ${p.price}</p>
        <p>Kode: ${p.code}</p>
        <button class="btn" onclick="addToCart('${p.name}','${p.price}','${p.code}')">+ Keranjang</button>
      `;
      grid.appendChild(div);
    });

    // CART LOGIC
    let cart = JSON.parse(localStorage.getItem('jaluCart')||'[]');
    function updateCartCount() {
      document.getElementById('cartCount').textContent = cart.length;
    }
    function addToCart(name,price,code) {
      cart.push({name,price,code});
      localStorage.setItem('jaluCart', JSON.stringify(cart));
      updateCartCount();
      alert(name+' ditambahkan ke keranjang!');
    }
    function openCart() {
      const cont = document.getElementById('cartItems');
      cont.innerHTML = '';
      let wa = 'Halo min, saya ingin membeli:%0A';
      cart.forEach((i,k)=> {
        cont.innerHTML += `<p>${k+1}. ${i.name} (${i.code}) - ${i.price}</p>`;
        wa += `- ${i.name} (${i.code}) - ${i.price}%0A`;
      });
      document.getElementById('checkoutBtn').href = 
        `https://wa.me/6285189014747?text=${wa}`;
      document.getElementById('cartModal').style.display = 'flex';
    }
    function closeCart() {
      document.getElementById('cartModal').style.display = 'none';
    }
    function copyFriendCode() {
      navigator.clipboard.writeText('123456789');
      alert('Friend Code disalin!');
    }
    updateCartCount();

    // CHAT BOT & AI omitted for brevity (already integrated earlier)
  </script>
</body>
</html>
