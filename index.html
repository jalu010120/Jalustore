<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard Pengiriman Heart - JaluStore</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Pacifico&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    /* Add CSS Variables for Sky Chibi Theme */
    :root {
        --sky-blue-light: #C0E8F9; /* Langit cerah */
        --sky-blue-medium: #87CEEB; /* Awan biru */
        --sky-pink-light: #FFDDE1; /* Nuansa awan pink */
        --sky-yellow-light: #FFF8DC; /* Cahaya lembut */
        --sky-purple-soft: #E0BBE4; /* Sentuhan magis */

        --bg-color-overlay: rgba(255, 255, 255, 0.7); /* Lebih transparan dan cerah */
        --text-color: #333; /* Teks lebih gelap agar terbaca di latar cerah */
        --heading-color: #8A2BE2; /* Warna ungu kebiruan yang manis */
        --card-bg: rgba(255, 255, 255, 0.9); /* Card lebih solid dan cerah */
        --card-border: rgba(180, 200, 255, 0.6); /* Border lembut */
        --slot-gradient: linear-gradient(135deg, var(--sky-blue-light) 0%, var(--sky-pink-light) 100%); /* Gradient pelangi */
        
        --status-done-bg: #80CBC4; /* Hijau mint lembut */
        --status-done-text: #004D40;
        --status-fail-bg: #FFAB91; /* Oranye peach lembut */
        --status-fail-text: #D84315;
        --status-pending-bg: #FFCC80; /* Kuning pastel */
        --status-pending-text: #E65100;

        --progress-bar-bg: rgba(200, 230, 250, 0.7);
        --progress-fill-color: #64B5F6; /* Biru langit */

        /* Shadow dan efek lainnya */
        --soft-shadow: 0 4px 15px rgba(0,0,0,0.1);
        --inner-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
    }

    * { box-sizing: border-box; }
    body {
        font-family: 'Poppins', sans-serif; /* Font utama yang lebih lembut */
        margin: 0;
        padding: 0;
        /* Menggunakan gambar latar Sky yang lebih cerah dan chibi */
        background: url('https://thatskyshop.com/cdn/shop/files/Page-thatskywallpaper-Portrait-13.jpg?v=1711607986&width=750') no-repeat center center fixed;
        background-size: cover;
        color: var(--text-color);
        min-height: 100vh;
        overflow-x: hidden; /* Mencegah scroll horizontal */
    }
    .overlay {
        background-color: var(--bg-color-overlay); /* Overlay lebih transparan dan cerah */
        min-height: 100vh;
        padding: 2rem;
        backdrop-filter: blur(5px); /* Blur yang sedikit lebih lembut */
        display: flex;
        flex-direction: column;
        align-items: center; /* Pusatkan konten */
    }
    #live-time {
        text-align: center;
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
        color: var(--heading-color); /* Warna yang lebih cerah */
        letter-spacing: 1px;
        font-weight: 600;
        background: rgba(255, 255, 255, 0.7);
        padding: 0.5rem 1rem;
        border-radius: 25px;
        box-shadow: var(--soft-shadow);
        animation: pulseTime 1.5s infinite alternate; /* Efek bernafas */
    }

    @keyframes pulseTime {
        from { transform: scale(1); }
        to { transform: scale(1.03); }
    }

    h1 {
        font-family: 'Fredoka', sans-serif; /* Font utama judul: Fredoka */
        text-align: center;
        color: var(--heading-color);
        margin-bottom: 1.5rem; /* Kurangi margin untuk memberi ruang tombol */
        text-shadow: 2px 2px 7px rgba(0,0,0,0.2);
        font-size: 2.8rem; /* Ukuran font lebih besar */
        letter-spacing: 2px;
        line-height: 1.2;
    }
    h1 em {
        font-family: 'Pacifico', cursive; /* Font khusus untuk teks di dalam <em> (JaluStore): Pacifico */
        display: block;
        font-size: 0.7em;
        font-style: normal;
        color: var(--text-color);
        opacity: 0.8;
    }

    /* Gaya untuk tombol katalog */
    .catalog-button {
        display: inline-block;
        background: linear-gradient(45deg, #FFD1DC, #FFABAB); /* Pink lembut ke peach */
        color: #fff;
        padding: 0.8rem 1.8rem;
        border-radius: 30px;
        text-decoration: none;
        font-size: 1.2rem;
        font-weight: 600;
        margin-top: 1rem; /* Jarak dari judul */
        margin-bottom: 2.5rem; /* Jarak ke bagian selanjutnya */
        box-shadow: 0 5px 15px rgba(255,100,150,0.3); /* Bayangan pink */
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        letter-spacing: 1px;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    }

    .catalog-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(255,100,150,0.4);
    }

    section {
        margin-bottom: 3rem; /* Jarak antar bagian lebih besar */
        width: 100%;
        max-width: 900px; /* Lebar maksimum untuk konten */
    }
    .slot-title {
        font-size: 1.5rem;
        font-weight: 700;
        background: var(--slot-gradient); /* Gradient lebih colorful */
        color: #fff; /* Teks putih di gradient cerah */
        padding: 0.8rem 1.8rem;
        border-radius: 30px; /* Bentuk lebih bulat/pill */
        margin-bottom: 1.5rem;
        display: inline-block;
        box-shadow: var(--soft-shadow);
        text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        transition: transform 0.2s ease-in-out;
        letter-spacing: 1px;
    }
    .slot-title:hover {
        transform: translateY(-3px); /* Efek melayang */
    }
    .cards {
        display: flex;
        flex-wrap: wrap;
        gap: 1.2rem; /* Jarak antar kartu lebih besar */
        justify-content: center; /* Pusatkan kartu */
    }
    .card {
        background: var(--card-bg);
        border: 2px solid var(--card-border); /* Border lebih jelas */
        border-radius: 18px; /* Lebih bulat */
        padding: 1.2rem 1.5rem;
        min-width: 190px; /* Ukuran minimum lebih besar */
        flex: 1 1 250px; /* Fleksibilitas ukuran */
        box-shadow: var(--soft-shadow); /* Bayangan lembut */
        transition: transform 0.2s ease-out, background 0.2s ease-out;
        display: flex;
        flex-direction: column;
        justify-content: space-between; /* Untuk mendorong status ke bawah */
        position: relative; /* Untuk potensi elemen tambahan */
        overflow: hidden; /* Mengatasi sudut card */
    }
    .card:hover {
        transform: translateY(-5px) scale(1.02); /* Efek melayang dan sedikit membesar */
        box-shadow: 0 8px 25px rgba(0,0,0,0.15); /* Bayangan lebih dalam saat hover */
        background: rgba(255,255,255,0.95);
    }
    .name {
        font-size: 1.2em;
        font-weight: 700; /* Lebih tebal */
        margin-bottom: 0.5em;
        color: #555;
        text-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .number {
        font-size: 1.05em;
        margin-bottom: 0.8em; /* Jarak lebih besar */
        color: #666;
    }
    .status {
        margin-top: auto;
        font-size: 0.95em;
        font-weight: 800; /* Sangat tebal */
        display: inline-block;
        border-radius: 15px; /* Lebih bulat */
        padding: 0.3em 0.8em;
        letter-spacing: 0.8px;
        align-self: flex-start;
        box-shadow: var(--inner-shadow);
        text-transform: uppercase;
        transition: background 0.3s ease, color 0.3s ease;
    }
    /* Status Colors */
    .status.done { background: var(--status-done-bg); color: var(--status-done-text); }
    .status.fail { background: var(--status-fail-bg); color: var(--status-fail-text); }
    .status.pending { background: var(--status-pending-bg); color: var(--status-pending-text); }

    /* Progress Bar Styles */
    .progress-bar-container {
        height: 10px; /* Lebih tebal */
        background-color: var(--progress-bar-bg);
        border-radius: 5px; /* Lebih bulat */
        margin-top: 0.8em;
        overflow: hidden;
        box-shadow: var(--inner-shadow);
        display: none;
    }

    .card.pending .progress-bar-container,
    .card.fail .progress-bar-container {
        display: block;
    }

    .progress-bar-fill {
        height: 100%;
        background-color: var(--progress-fill-color);
        border-radius: 5px;
        transition: width 0.7s ease-in-out; /* Animasi lebih lembut */
        position: relative;
    }

    .progress-bar-fill::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: linear-gradient(90deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.1) 100%);
        opacity: 0;
        animation: shimmer 2s infinite linear;
    }

    @keyframes shimmer {
        0% { opacity: 0; transform: translateX(-100%); }
        50% { opacity: 1; transform: translateX(100%); }
        100% { opacity: 0; transform: translateX(100%); }
    }


    /* Chibi elements - these would typically be background images or SVG icons */
    .card::before {
        content: '';
        position: absolute;
        top: -10px;
        right: -10px;
        width: 50px;
        height: 50px;
        /* Contoh: Awan atau bintang kecil (Anda bisa ganti path/url ke icon Anda) */
        /* background: url('path/to/chibi-cloud-icon.png') no-repeat center center / contain; */
        opacity: 0.1;
        pointer-events: none;
        z-index: 0;
    }

    .card.done::before {
        /* background: url('path/to/chibi-star-icon.png') no-repeat center center / contain; */
        opacity: 0.2;
    }


    @media (max-width: 768px) { /* Adjust for tablets */
        .overlay {padding: 1.5rem;}
        h1 { font-size: 2.2rem; }
        .catalog-button { font-size: 1.1rem; padding: 0.7rem 1.5rem; margin-bottom: 2rem;}
        .slot-title { font-size: 1.3rem; padding: 0.7rem 1.5rem; }
        .cards { gap: 1rem; }
        .card { min-width: 150px; flex: 1 1 200px; padding: 1rem 1.2rem; }
        .name { font-size: 1.1em; }
        .number { font-size: 1em; }
        .status { font-size: 0.85em; padding: 0.2em 0.7em; }
    }

    @media (max-width: 500px) { /* Adjust for mobile phones */
        .overlay {padding: 1rem;}
        h1 { font-size: 1.8rem; margin-bottom: 1.5rem;}
        h1 em { font-size: 0.8em; }
        .catalog-button { font-size: 1rem; padding: 0.6rem 1.2rem; margin-bottom: 1.5rem;}
        .slot-title { font-size: 1.2rem; padding: 0.6rem 1.2rem; border-radius: 25px; }
        .cards { flex-direction: column; gap: 0.8rem; }
        .card { min-width: unset; padding: 0.9rem 1.1rem; border-radius: 15px; }
        .name { font-size: 1em; }
        .number { font-size: 0.9em; }
        .status { font-size: 0.8em; padding: 0.15em 0.6em; border-radius: 12px; }
        #live-time { font-size: 1rem; padding: 0.4rem 0.8rem; }
    }
    ::-webkit-scrollbar {width:8px; background:#e0f7fa;} /* Scrollbar lebih terang */
    ::-webkit-scrollbar-thumb {background:var(--sky-blue-medium); border-radius:8px;}
    ::-webkit-scrollbar-thumb:hover {background:#67B2D2;}
  </style>
</head>
<body>
  <div class="overlay">
    <div id="live-time"></div>
    <h1>📦 Laporan Pengiriman Heart <br><em>JaluStore</em></h1>

    <a href="https://jalustore.github.io/Store/" class="catalog-button" target="_blank">
      💖 Beli Heart Sekarang!
    </a>

    <section>
      <div class="slot-title">Slot 1</div>
      <div id="slot1-cards" class="cards"></div> </section>

    <section>
      <div class="slot-title">Slot 2</div>
      <div id="slot2-cards" class="cards"></div> </section>

    <section>
      <div class="slot-title">Slot 3</div>
      <div id="slot3-cards" class="cards"></div> </section>

    <section>
      <div class="slot-title">🗂️ Riwayat Orderan Selesai</div>
      <div id="completed-cards" class="cards"></div> </section>

  </div>

  <script>
    // Data structure (array of objects)
    const deliveryData = [
        // Slot 1
        { slot: 1, name: 'Angel', order: 450, send: 260, statusOverride: 'fail' }, // Manually mark as fail
        { slot: 1, name: 'Husna', order: 450, send: 274 },
        { slot: 1, name: 'Mursyid', order: 320, send: 80, statusOverride: 'fail' }, // Manually mark as fail
        { slot: 1, name: 'Angel2', order: 600, send: 320 },
        { slot: 1, name: 'Aelia', order: 420, send: 180 },
        { slot: 1, name: 'Tsabyy', order: 200, send: 140 },
        { slot: 1, name: 'Aya', order: 320, send: 100 },
        { slot: 1, name: 'Rain', order: 320, send: 100 },

        // Slot 2
        { slot: 2, name: 'Moon', order: 530, send: 280 },
        { slot: 2, name: 'Hira', order: 360, send: 287 },
        { slot: 2, name: 'Sea', order: 150, send: 137 },
        { slot: 2, name: 'Zee', order: 150, send: 153 }, 
        { slot: 2, name: 'Joy', order: 320, send: 260, statusOverride: 'fail' }, // Manually mark as fail
        { slot: 2, name: 'Harbie', order: 200, send: 180 },
        { slot: 2, name: 'Aze', order: 570, send: 200 },
        { slot: 2, name: 'Sena', order: 570, send: 200 },
        { slot: 2, name: 'raine', order: 420, send: 180 },
        { slot: 2, name: 'Rani', order: 320, send: 100 },

        // Slot 3
        { slot: 3, name: 'Kiki', order: 450, send: 429 },
        { slot: 3, name: 'Tobias', order: 500, send: 235, statusOverride: 'fail' }, // Manually mark as fail
        { slot: 3, name: 'Luna', order: 800, send: 690 },
        { slot: 3, name: 'Ney', order: 3540, send: 2880 },
        { slot: 3, name: 'Araba', order: 150, send: 90, statusOverride: 'fail' }, // Manually mark as fail
        { slot: 3, name: 'Diyy', order: 320, send: 100 },
        { slot: 3, name: 'Al', order: 320, send: 80 },
        { slot: 3, name: 'Purili', order: 320, send: 100 },
        { slot: 3, name: 'Idnes', order: 320, send: 100 },
        { slot: 3, name: 'Anggi', order: 320, send: 100 },
        { slot: 3, name: 'Alip', order: 320, send: 80 },
        { slot: 3, name: 'Autumn', order: 850, send: 40, statusOverride: 'fail' }, // Manually mark as fail

        // ALL Previously Completed Orders (Explicitly added to ensure they persist)
        // These are orders that were marked as "Done" in previous updates or initially.
        { slot: 'completed', name: 'Fida', order: 100, send: 103 }, 
        { slot: 'completed', name: 'Vyan', order: 80, send: 83 }, 
        { slot: 'completed', name: 'Ayu', order: 1000, send: 1003 }, 
        { slot: 'completed', name: 'Anna', order: 600, send: 603 }, 
        { slot: 'completed', name: 'Nanda', order: 210, send: 213 }, 
        { slot: 'completed', name: 'Alvin', order: 210, send: 213 }, 
        { slot: 'completed', name: 'Ira', order: 150, send: 153 }, 
        { slot: 'completed', name: 'Kael', order: 120, send: 123 }, 
        { slot: 'completed', name: 'Xen', order: 210, send: 213 }, 
        { slot: 'completed', name: 'Lusi', order: 600, send: 603 }  
    ];

    // Function to update live time
    function updateTime() {
        const now = new Date();
        const waktu = now.toLocaleString('id-ID', {
            hour: '2-digit', minute: '2-digit', second: '2-digit'
        });
        document.getElementById('live-time').textContent = '⏰: ' + waktu;
    }

    // Function to render the cards
    function renderDashboard(data) {
        const slots = {
            1: document.getElementById('slot1-cards'),
            2: document.getElementById('slot2-cards'),
            3: document.getElementById('slot3-cards'),
            completed: document.getElementById('completed-cards')
        };

        // Clear existing cards
        Object.values(slots).forEach(container => {
            if (container) container.innerHTML = '';
        });

        // Use Set to keep track of names already processed for current orders,
        // so we don't re-add them if they also appear in completed (e.g., initial state)
        const currentOrderNames = new Set();
        
        // Filter and render current orders first
        data.forEach(item => {
            // Determine if the item belongs to a current slot and is not yet completed
            const isCurrentlyActive = (typeof item.send === 'number' && typeof item.order === 'number' && item.send < item.order && item.slot !== 'completed') || 
                                      (item.statusOverride === 'fail' && item.slot !== 'completed');
            
            if (isCurrentlyActive) {
                const container = slots[item.slot];
                if (!container) return; // Skip if slot container not found

                currentOrderNames.add(item.name); // Add name to set to prevent re-adding to completed later

                let statusClass = 'pending';
                let statusText = '⏳ Progress';
                let showProgress = true;

                if (item.statusOverride === 'fail') {
                    statusClass = 'fail';
                    statusText = '❌ Stuck';
                    showProgress = true;
                }

                let progressPercent = 0;
                if (typeof item.order === 'number' && typeof item.send === 'number' && item.order > 0) {
                    progressPercent = Math.min((item.send / item.order) * 100, 100);
                }

                const cardHTML = `
                    <div class="card ${statusClass}">
                        <div class="name">${item.name}</div>
                        <div class="number">Order: ${item.order} | Send: ${item.send}</div>
                        <span class="status ${statusClass}">${statusText}</span>
                        ${showProgress && typeof item.order === 'number' && typeof item.send === 'number' ? `
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" style="width: ${progressPercent}%;"></div>
                        </div>
                        ` : ''}
                    </div>
                `;
                container.innerHTML += cardHTML;
            }
        });

        // Render completed orders
        const completedContainer = slots['completed'];
        data.forEach(item => {
            // An item is completed if:
            // 1. Its send >= order AND it's not manually stuck (statusOverride: 'fail')
            // 2. OR its slot is explicitly set to 'completed'
            // AND it's not already rendered in a current slot (to avoid duplicates if data is structured oddly)
            const isCompleted = ((typeof item.send === 'number' && typeof item.order === 'number' && item.send >= item.order && item.statusOverride !== 'fail') || item.slot === 'completed');

            if (isCompleted && !currentOrderNames.has(item.name)) {
                const cardHTML = `
                    <div class="card done">
                        <div class="name">${item.name}</div>
                        <div class="number">Order: ${item.order} | Send: ${item.send}</div>
                        <span class="status done">✅ Done</span>
                    </div>
                `;
                completedContainer.innerHTML += cardHTML;
            }
        });
    }

    // Initial setup
    document.addEventListener('DOMContentLoaded', () => {
        updateTime(); // Update time immediately on load
        setInterval(updateTime, 1000); // Update time every second
        renderDashboard(deliveryData); // Render the dashboard with the data
    });

  </script>
</body>
</html>
